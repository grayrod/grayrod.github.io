<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" type="text/css" href="na.css">
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
    <script type="text/javascript" src="na.js"></script>
</head>

<body>
    <div id="top">
        <center><h2>Adaptive Numerical Analysis JS</h2>
        <p>Click Evaluate to calculate the minimum, maximum, area, and plot of the function on the given interval.
        <br />
        Results are generated using recursive numerical integration and differentiation algorithms implemented in JavaScript.
        <br /></p></center>
        <p>&nbsp;</p>
        <div id="results">
            <p>&nbsp;</p>
        </div>
    </div>
    <div id="wrapper">
        <div id="parameters">
            <div id="inputs">
                <p><strong>Function of x:</strong></p>
                <textarea id="f" rows="4">Math.pow(x-2, 3) - (Math.pow(x, 2) * Math.sin(Math.pow(x, 2))) + Math.pow(x, 2)</textarea><br />
                <p class="explanation">Enter a <a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math#Methods" target="_blank">mathematical JavaScript</a> expression using variable x.</p>
                <br />
                <p><strong>Interval: </strong><input id="xa" class="interval" type="number" value="2" step="0.1"> to <input id="xb" class="interval" type="number" value="9.1" step="0.1"></p>
                <p class="explanation">The range of x to evaluate over.</p>
                <br />
                <p><strong>Tolerance: </strong>&nbsp;&nbsp;<input type="number" id="tol" value="0.01" step="0.00001"></p>
                <p class="explanation">The desired degree of accuracy. A smaller value like 0.00001 gives more precise results, and calculates more points.</p>
                </p>
            </div>

            <div id="ready" style="display:block; margin:auto;">
                <button type="button" id="evaluate" style="display:block"><strong>Evaluate</strong></button>
            </div>

            <div id="loading" style="display:none; margin:auto;">
                <img src='loading.gif' id='loading-image' style='max-width: 100%; max-height: 100%; margin:auto;' />
            </div>

            <div id="alerts">
                <!-- infinity alerts will appear here -->
            </div>
        </div>

        <div id="plot">
            <!-- google chart will appear here -->
        </div>

    </div>

    <script>
    (function ($) {
        $.each(['show', 'hide'], function (i, ev) {
            var el = $.fn[ev];
            $.fn[ev] = function () {
                this.trigger(ev);
                el.apply(this, arguments);
                return el;
            };
        });
    })(jQuery);
    $(document).ready(function() {
        $('#evaluate').click(function() {
            $('#alerts').empty();
            $('#loading').show();
            $('#ready').hide();
        });
        $('#loading').on('show', function() {
            setTimeout("analyzeMyFunction( [ $('#xa').val(), $('#xb').val() ], $('#tol').val(), $('#f').val() );", 1000);
        });
    });
    </script>

</body>
</html>
